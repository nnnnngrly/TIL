# base가 될 Image의 이름으로 시작
FROM node

# 후속 명령이 어디에서 실행될 것인가?
WORKDIR /app

# 어느 폴더/파일이 이미지에 포함되어야 하는가?
# .(Container 외부 = Dockerfile이 있는 모든 폴더 및 하위 폴더)
# ./(이미지 내부의 경로 = 도커 컨테이너 내부의 파일 경로 = Workdir로 설정한 상대 경로)
# ./을 /app과 같이 절대 경로로 표현할 수도 있음

COPY . ./

# 어떤 명령을 실행해야 하는가?
RUN npm install

# 특정 포트를 노출하고 싶을 때
EXPOSE 80

# 모든 작업(종속성 설치)이 종료되면 무엇을 실행해야 하는가?
# CMD는 이미지 생성시 실행되지 않고, 컨테이너 실행 후 실행됨
# 배열의 형태로 전달
CMD ["node", "server.js"]
